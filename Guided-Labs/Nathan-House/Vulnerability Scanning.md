# Ports and Vulnerability Scanning

<h2>Home Router</h2>

Description: The router connects to the internet through a cable. Wireless devices like laptops, phones, tablets, and possibly wired connections via Ethernet are linked to the router. Additional devices like printers, desktops, and IoT devices like TVs may also be connected. The router serves as the central component for your network and security, typically acting as the default gateway for internet traffic. To find your router's IP address, check for the default gateway on your devices.

<h3> In order to find the default gateway: </h3>

Windows:
  - Command Prompt type: route print
  - Underneath the IPv4 Route Table will have the Gateway IP Address

or
  - Command Prompt type: ifconfig
  - Underneath the Ethernet adapter Local Area Connection will have the Default Gateway IP Address

Linux:
  - Terminal type: sudo route -n
  - Underneath Gateway

MacOSx:
  - Terminal app type: route -n get default
  - On the line gateway

Can check [techspot](https://www.techspot.com/guides/287-default-router-ip-addresses/) for the default router IP address if the command above doesn't work

The router plays a crucial role in protecting internal devices from the internet. It has both an external IP address and an internal IP address, which serves as the default gateway for your devices' communication.
  - In order to find the external IP address, you can use [whatismyipaddress](https://whatismyipaddress.com/)

In most instances, direct connections to your internal devices from the internet are not possible. This is due to a service called NAT, or Network Address Translation. To enable internet devices to connect to your internal devices, you'd need to configure port forwarding or use a DMZ (Demilitarized Zone) within the router.


When you browse the web via the router, it retains your connections, permitting responses from the same source. This feature, known as stateful configuration, is usually set as the default, enabling two-way communication as long as you initiate the connection.

<h2></h2>

<h2>External Vulnerability Scanning</h2>

Shodan

Description: [Shodan](https://www.shodan.io/) is a search engine that searches for vulnerable device on the internet. We can attempt to compromise internal devices, monitor network traffic, perform man-in-the-middle attacks, and even potentially gain control over the network and the devices themselves.

  - Can search: netgear for all the devices that are associated with netgear and have vulnerabilities
  - Can search: "default password" for all the devices that has default password
  - Can search: shodan.io/host/[your IP_Adress] to see if your router is secured.

Other external vulnerability tool that can be used:
  
  - [Pentest-tools](https://pentest-tools.com/)
  - [Gibson Research Corp](https://www.grc.com/shieldsup)
  - [Qualys](https://www.qualys.com/community-edition/#/freescan)

<h2></h2>

<h2>Internal Vulnerability Scanning</h2>


Let's explore the process of mapping your internal network to identify connected devices, their IP addresses, and the services they run. The device you're currently using obtains an IP address either through DHCP (Dynamic Host Configuration Protocol) or via static assignment, which is typically managed by you or your network administrator. In most cases on a local network, the DHCP server responsible for assigning IP addresses is your router.

To Determine if you are using DHCP 

- Windows:
  - Command Prompt type: ifconfig /all |more
  - under Ethernet adapter Ethernet, look at DHCP

- Linux (Kali or Debian):
  - Terminal type: cat /var/log/syslog | grep DHCP

- MacOSx:
  - Navigate to System Preferences > Network > Advanced
 
<h2></h2>

Using Kali Linux to map the local network

**Nmap**:
  - Terminal type: nmap
    - to open up nmap
  - Terminal type: ip a show eth0
    - We can examine our subnet mask and IP address
  - Terminal type: nmap -T4 -F 192.168.126.0/24
    - Put whatever subnet mask is and a 0 instead of the device IP for the final number
    - T is for fast execution and F is for few ports

<p align="left">
How to scan for port on Nmap <br/>
<img src="https://i.imgur.com/1DxnVFn.png" height="30%" width="30%" alt=""/>
<br />

**Zenmap**:
  - Command: nmap -T4 -A -v 192.168.126.1-254
    - can use 1-254 instead of /24
    - A = OS detection, version detection, scripting scanning and traceroute
    - v = verbose
  - Same result as nmap on command line but it store information via GUI on the left side, OS and Host
  - Can view the Topology view 
  - Can view the Ports / Hosts
 
<p align="left">
How to scan for port on Zenmap <br/>
<img src="https://i.imgur.com/ltOoKhc.png" height="30%" width="30%" alt=""/>
<br />

<p align="left">
Zenmap Topology view <br/>
<img src="https://i.imgur.com/MAkghBD.png" height="30%" width="30%" alt=""/>
<br />

<p align="left">
Zenmap Ports / Hosts view <br/>
<img src="https://i.imgur.com/ra6RBVS.png" height="30%" width="30%" alt=""/>
<br />

Other internal vulnerability tool that can be used
  - [OpenVAS](https://www.openvas.org/)
  - [Tenable Nessus](https://www.tenable.com/products/nessus/nessus-essentials)
  - [Qualys](https://www.qualys.com/community-edition/#/freescan)
  - [Metasploitable](https://sourceforge.net/projects/metasploitable/files/Metasploitable2/)


